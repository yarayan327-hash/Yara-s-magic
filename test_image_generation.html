<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Banana å›¾åƒç”Ÿæˆæµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8 text-blue-600">Nano Banana å›¾åƒç”Ÿæˆæµ‹è¯•</h1>

        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">å›¾åƒç”Ÿæˆæµ‹è¯•</h2>
            <div class="mb-4">
                <label class="block text-sm font-medium mb-2">è¾“å…¥å›¾åƒç”Ÿæˆæç¤ºè¯:</label>
                <input type="text" id="image-prompt" placeholder="ä¾‹å¦‚: ç”Ÿæˆä¸€åªå¯çˆ±çš„æœºå™¨çŒ«ï¼Œèµ›åšæœ‹å…‹é£æ ¼"
                       class="w-full p-3 border rounded"
                       value="ç”Ÿæˆä¸€åªå¯çˆ±çš„æœºå™¨çŒ«ï¼Œèµ›åšæœ‹å…‹é£æ ¼">
            </div>
            <button onclick="testImageGeneration()" class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600">ç”Ÿæˆå›¾åƒ</button>
            <div id="image-result" class="mt-4 p-4 rounded hidden"></div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">æ”¯æŒçš„å›¾åƒæç¤ºè¯ç±»å‹</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-4 bg-blue-50 rounded">
                    <h3 class="font-semibold text-blue-800">æ–‡æœ¬åˆ°å›¾åƒ</h3>
                    <p class="text-sm">"ç”Ÿæˆä¸€ä¸ªæœªæ¥åŸå¸‚çš„æ—¥è½æ™¯è±¡"</p>
                </div>
                <div class="p-4 bg-green-50 rounded">
                    <h3 class="font-semibold text-green-800">é£æ ¼åŒ–å›¾åƒ</h3>
                    <p class="text-sm">"åˆ›å»ºä¸€å¹…å°è±¡æ´¾é£æ ¼çš„å±±æ°´ç”»"</p>
                </div>
                <div class="p-4 bg-purple-50 rounded">
                    <h3 class="font-semibold text-purple-800">æ¦‚å¿µè‰ºæœ¯</h3>
                    <p class="text-sm">"è®¾è®¡ä¸€ä¸ªè’¸æ±½æœ‹å…‹é£æ ¼çš„é£è¡Œå™¨"</p>
                </div>
                <div class="p-4 bg-orange-50 rounded">
                    <h3 class="font-semibold text-orange-800">è§’è‰²è®¾è®¡</h3>
                    <p class="text-sm">"åˆ›å»ºä¸€ä¸ªå¯çˆ±çš„å¡é€šé¾™è§’è‰²"</p>
                </div>
            </div>
        </div>

        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
            <h3 class="font-semibold text-yellow-800 mb-2">ğŸ’¡ æç¤º</h3>
            <ul class="list-disc pl-5 space-y-1 text-sm">
                <li>ä½¿ç”¨å…·ä½“çš„æè¿°è¯æ¥è·å¾—æ›´å¥½çš„æ•ˆæœ</li>
                <li>æŒ‡å®šè‰ºæœ¯é£æ ¼ï¼ˆå¦‚"èµ›åšæœ‹å…‹"ã€"å°è±¡æ´¾"ã€"æç®€ä¸»ä¹‰"ï¼‰</li>
                <li>åŒ…å«é¢œè‰²ã€å…‰çº¿ã€æ„å›¾ç­‰ç»†èŠ‚</li>
                <li>å¯ä»¥è¦æ±‚å¤šä¸ªå˜ä½“</li>
            </ul>
        </div>
    </div>

    <script>
        async function testImageGeneration() {
            const prompt = document.getElementById('image-prompt').value;
            const resultDiv = document.getElementById('image-result');

            if (!prompt) {
                alert('è¯·è¾“å…¥å›¾åƒç”Ÿæˆæç¤ºè¯');
                return;
            }

            resultDiv.className = "mt-4 p-4 rounded bg-blue-100 text-blue-800";
            resultDiv.innerHTML = 'æ­£åœ¨ç”Ÿæˆå›¾åƒ...';
            resultDiv.classList.remove('hidden');

            try {
                const API_KEY = "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";
                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`,
                        'HTTP-Referer': window.location.href,
                        'X-Title': 'Nano Banana Image Test'
                    },
                    body: JSON.stringify({
                        model: 'google/gemini-2.5-flash-image-preview',
                        messages: [
                            { role: 'user', content: prompt }
                        ],
                        temperature: 0.7,
                        max_tokens: 1000
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                const message = data.choices[0].message;

                let resultHTML = `
                    <strong>âœ… å›¾åƒç”ŸæˆæˆåŠŸï¼</strong><br>
                    <strong>æç¤ºè¯:</strong> ${prompt}<br>
                    <strong>å›å¤:</strong> ${message.content || 'å›¾åƒå·²ç”Ÿæˆ'}<br>
                `;

                if (message.images && message.images.length > 0) {
                    resultHTML += `<div class='mt-4'>
                        <strong>ç”Ÿæˆçš„å›¾åƒ:</strong><br>
                        <div class='grid grid-cols-1 md:grid-cols-2 gap-4 mt-2'>
                    `;

                    message.images.forEach((image, index) => {
                        resultHTML += `<div class='border rounded p-2'>
                            <img src='${image.image_url.url}' alt='ç”Ÿæˆçš„å›¾åƒ ${index + 1}' class='max-w-full h-auto rounded' />
                            <p class='text-xs text-gray-600 mt-1'>å›¾åƒ ${index + 1}</p>
                        </div>`;
                    });

                    resultHTML += '</div></div>';
                }

                resultDiv.className = "mt-4 p-4 rounded bg-green-100 text-green-800";
                resultDiv.innerHTML = resultHTML;

            } catch (error) {
                resultDiv.className = "mt-4 p-4 rounded bg-red-100 text-red-800";
                resultDiv.innerHTML = `
                    <strong>âŒ å›¾åƒç”Ÿæˆå¤±è´¥</strong><br>
                    é”™è¯¯ä¿¡æ¯: ${error.message}<br>
                    è¯·æ£€æŸ¥ API å¯†é’¥å’Œç½‘ç»œè¿æ¥
                `;
            }
        }
    </script>
</body>
</html>